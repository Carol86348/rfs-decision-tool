
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>再餵食症候群決策輔助工具</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; }
        .result { font-weight: bold; margin-top: 20px; font-size: 1.2em; }
    </style>
</head>
<body>
    <h1>再餵食症候群決策輔助工具</h1>

    <div>
        <h2>基本資料</h2>
        <label>身高（cm）<input type="number" id="height" value="160"></label><br>
        <label>體重（kg）<input type="number" id="weight" value="40"></label><br>
        <button onclick="calculateBMI()">計算 BMI</button>
        <p id="bmiResult">BMI： </p>
    </div>

    <hr>
    <h2>風險因子評估（BMI / 體重減輕 / 禁食 條件三選一）</h2>
    <table>
        <tr>
            <th>A 類</th>
            <th>B 類</th>
            <th>C 類</th>
        </tr>
        <tr>
            <td><input type="checkbox" name="bmi" class="A"> BMI &lt; 18.5</td>
            <td><input type="checkbox" name="bmi" class="B"> BMI &lt; 16</td>
            <td><input type="checkbox" name="bmi" class="C"> BMI &lt; 14</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="weightloss" class="A"> 體重減輕 &gt; 10%</td>
            <td><input type="checkbox" name="weightloss" class="B"> 體重減輕 &gt; 15%</td>
            <td><input type="checkbox" name="weightloss" class="C"> 體重減輕 &gt; 20%</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="intake" class="A"> 進食量 &lt; 1000 kcal 或禁食 &gt; 5 天</td>
            <td><input type="checkbox" name="intake" class="B"> 進食量 &lt; 1000 kcal 或禁食 &gt; 10 天</td>
            <td><input type="checkbox" name="intake" class="C"> 禁食 &gt; 15 天</td>
        </tr>
        <tr>
            <td><input type="checkbox" class="A"> 酒精或藥物成癮病史</td>
            <td><input type="checkbox" class="B"> 低血鉀 / 低血磷 / 低血鎂</td>
            <td></td>
        </tr>
    </table>

    <button onclick="evaluateRisk()">🔎 評估風險等級</button>
    <p class="result" id="riskResult"></p>

    <script>
        const categories = ['bmi', 'weightloss', 'intake'];

        categories.forEach(name => {
            const group = document.querySelectorAll(`input[name="${name}"]`);
            group.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) {
                        group.forEach(c => {
                            if (c !== checkbox) c.checked = false;
                        });
                    }
                });
            });
        });

        function calculateBMI() {
            const h = parseFloat(document.getElementById('height').value);
            const w = parseFloat(document.getElementById('weight').value);
            if (!h || !w) {
                document.getElementById('bmiResult').innerText = '請輸入正確的身高與體重';
                return;
            }
            const bmi = (w / (h / 100) ** 2).toFixed(1);
            document.getElementById('bmiResult').innerText = 'BMI：' + bmi;
        }

        function evaluateRisk() {
            const A = document.querySelectorAll('.A:checked').length;
            const B = document.querySelectorAll('.B:checked').length;
            const C = document.querySelectorAll('.C:checked').length;

            let result = '';
            if (C >= 1) {
                result = '🔺 高度風險';
            } else if (B >= 1 || A >= 2) {
                result = '⚠️ 中度風險';
            } else if (A >= 1) {
                result = '🔸 低度風險';
            } else {
                result = '尚未符合風險評估條件';
            }
            document.getElementById('riskResult').innerText = result;
        }
    </script>
</body>
</html>
